2025-02-05 10:14:35 | INFO | Started server process [13344]
2025-02-05 10:14:35 | INFO | Waiting for application startup.
2025-02-05 10:14:35 | INFO | Application startup complete.
2025-02-05 10:14:54 | INFO | Shutting down
2025-02-05 10:14:54 | INFO | Waiting for application shutdown.
2025-02-05 10:14:54 | INFO | Application shutdown complete.
2025-02-05 10:14:54 | INFO | Finished server process [13344]
2025-02-05 10:14:56 | INFO | Started server process [15744]
2025-02-05 10:14:56 | INFO | Waiting for application startup.
2025-02-05 10:14:56 | INFO | Application startup complete.
2025-02-05 10:15:33 | INFO | Shutting down
2025-02-05 10:15:33 | INFO | Waiting for application shutdown.
2025-02-05 10:15:33 | INFO | Application shutdown complete.
2025-02-05 10:15:33 | INFO | Finished server process [15744]
2025-02-05 10:15:35 | INFO | Started server process [5272]
2025-02-05 10:15:35 | INFO | Waiting for application startup.
2025-02-05 10:15:35 | INFO | Application startup complete.
2025-02-05 10:15:43 | INFO | Shutting down
2025-02-05 10:15:44 | INFO | Waiting for application shutdown.
2025-02-05 10:15:44 | INFO | Application shutdown complete.
2025-02-05 10:15:44 | INFO | Finished server process [5272]
2025-02-05 10:16:00 | INFO | Started server process [10280]
2025-02-05 10:16:00 | INFO | Waiting for application startup.
2025-02-05 10:16:00 | INFO | Application startup complete.
2025-02-05 10:22:45 | INFO | Shutting down
2025-02-05 10:22:45 | INFO | Waiting for application shutdown.
2025-02-05 10:22:45 | INFO | Application shutdown complete.
2025-02-05 10:22:45 | INFO | Finished server process [10280]
2025-02-05 10:22:47 | INFO | Started server process [5280]
2025-02-05 10:22:47 | INFO | Waiting for application startup.
2025-02-05 10:22:47 | INFO | Application startup complete.
2025-02-05 10:23:08 | INFO | Shutting down
2025-02-05 10:23:08 | INFO | Waiting for application shutdown.
2025-02-05 10:23:08 | INFO | Application shutdown complete.
2025-02-05 10:23:08 | INFO | Finished server process [5280]
2025-02-05 10:23:10 | INFO | Started server process [23548]
2025-02-05 10:23:10 | INFO | Waiting for application startup.
2025-02-05 10:23:10 | INFO | Application startup complete.
2025-02-05 10:23:24 | INFO | Shutting down
2025-02-05 10:23:24 | INFO | Waiting for application shutdown.
2025-02-05 10:23:24 | INFO | Application shutdown complete.
2025-02-05 10:23:24 | INFO | Finished server process [23548]
2025-02-05 10:23:26 | INFO     | logging:callHandlers:1762 | Started server process [13912]
2025-02-05 10:23:26 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 10:23:26 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 10:35:17 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 10:35:17 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 10:35:17 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 10:35:17 | INFO     | logging:callHandlers:1762 | Finished server process [13912]
2025-02-05 10:35:19 | INFO     | logging:callHandlers:1762 | Started server process [8820]
2025-02-05 10:35:19 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 10:35:19 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 10:36:16 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 10:36:16 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 10:36:16 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 10:36:16 | INFO     | logging:callHandlers:1762 | Finished server process [8820]
2025-02-05 10:36:18 | INFO     | logging:callHandlers:1762 | Started server process [6544]
2025-02-05 10:36:18 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 10:36:18 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 10:36:43 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for test7081@example.com
2025-02-05 10:36:43 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: test7081@example.com
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:36:43 | INFO     | logging:callHandlers:1762 | [generated in 0.00137s] ('test7081@example.com',)
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | [generated in 0.00140s] ('test7081@example.com', 'Test User3', b'$2b$12$C517mge2NLvyiaEBfeNcx.cT9sHiLoPJxJE0aoQaXYnD6a256m9Qa', True, False, datetime.datetime(2025, 2, 5, 10, 36, 44, 130487), datetime.datetime(2025, 2, 5, 10, 36, 44, 130487))
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | [generated in 0.00133s] (4,)
2025-02-05 10:36:44 | INFO     | app.services.auth_service:register_user:49 | User registered successfully: test7081@example.com
2025-02-05 10:36:44 | INFO     | app.api.v1.endpoints.auth:register:20 | User registration successful for test7081@example.com
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | 127.0.0.1:54871 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:36:44 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for duplicate2148@example.com
2025-02-05 10:36:44 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: duplicate2148@example.com
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:36:44 | INFO     | logging:callHandlers:1762 | [cached since 1.062s ago] ('duplicate2148@example.com',)
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | [cached since 1.052s ago] ('duplicate2148@example.com', '1stemailuser', b'$2b$12$TSqyscVFs9BUiJ3EunGhk.824nLCUpp9CwPB3UQkBHD5hA4w2kL4S', True, False, datetime.datetime(2025, 2, 5, 10, 36, 45, 181154), datetime.datetime(2025, 2, 5, 10, 36, 45, 181154))
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | [cached since 1.046s ago] (5,)
2025-02-05 10:36:45 | INFO     | app.services.auth_service:register_user:49 | User registered successfully: duplicate2148@example.com
2025-02-05 10:36:45 | INFO     | app.api.v1.endpoints.auth:register:20 | User registration successful for duplicate2148@example.com
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | 127.0.0.1:54877 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:36:45 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for duplicate2148@example.com
2025-02-05 10:36:45 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: duplicate2148@example.com
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | [cached since 1.31s ago] ('duplicate2148@example.com',)
2025-02-05 10:36:45 | WARNING  | app.services.auth_service:register_user:29 | Registration attempt with duplicate email: duplicate2148@example.com
2025-02-05 10:36:45 | WARNING  | app.api.v1.endpoints.auth:register:23 | Registration failed: Duplicate entity - A user with this email is already registered
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | 127.0.0.1:54877 - "POST /api/v1/auth/register HTTP/1.1" 400
2025-02-05 10:36:45 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-02-05 10:43:27 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for test1777@example.com
2025-02-05 10:43:27 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: test1777@example.com
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | [cached since 403.7s ago] ('test1777@example.com',)
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | [cached since 403.7s ago] ('test1777@example.com', 'Test User3', b'$2b$12$BeA8UxMYDpQSTXKXX0c5ZOHJ.tfmw6vNVTCQC6mdWBEGWFef/e3dO', True, False, datetime.datetime(2025, 2, 5, 10, 43, 27, 788144), datetime.datetime(2025, 2, 5, 10, 43, 27, 788144))
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | [cached since 403.7s ago] (6,)
2025-02-05 10:43:27 | INFO     | app.services.auth_service:register_user:49 | User registered successfully: test1777@example.com
2025-02-05 10:43:27 | INFO     | app.api.v1.endpoints.auth:register:20 | User registration successful for test1777@example.com
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | 127.0.0.1:54996 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:43:27 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:43:28 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for duplicate2505@example.com
2025-02-05 10:43:28 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: duplicate2505@example.com
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | [cached since 404.8s ago] ('duplicate2505@example.com',)
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | [cached since 404.8s ago] ('duplicate2505@example.com', '1stemailuser', b'$2b$12$i.kl9wHeUtAcPV2m7nxJJeDlCAbjiwB8ORa0kVp5WxeYCbHvmXxA6', True, False, datetime.datetime(2025, 2, 5, 10, 43, 28, 926023), datetime.datetime(2025, 2, 5, 10, 43, 28, 926023))
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | [cached since 404.8s ago] (7,)
2025-02-05 10:43:28 | INFO     | app.services.auth_service:register_user:49 | User registered successfully: duplicate2505@example.com
2025-02-05 10:43:28 | INFO     | app.api.v1.endpoints.auth:register:20 | User registration successful for duplicate2505@example.com
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55001 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:43:28 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for duplicate2505@example.com
2025-02-05 10:43:28 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: duplicate2505@example.com
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | [cached since 405.1s ago] ('duplicate2505@example.com',)
2025-02-05 10:43:28 | WARNING  | app.services.auth_service:register_user:29 | Registration attempt with duplicate email: duplicate2505@example.com
2025-02-05 10:43:28 | WARNING  | app.api.v1.endpoints.auth:register:23 | Registration failed: Duplicate entity - A user with this email is already registered
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55001 - "POST /api/v1/auth/register HTTP/1.1" 400
2025-02-05 10:43:28 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-02-05 10:43:34 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for test9756@example.com
2025-02-05 10:43:34 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: test9756@example.com
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | [cached since 410.6s ago] ('test9756@example.com',)
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | [cached since 410.6s ago] ('test9756@example.com', 'Test User3', b'$2b$12$POrnNMQYHfdQdqPxmMTR9.IVhLryuYcb3byGVidA5TyVZ0hEJ5AnO', True, False, datetime.datetime(2025, 2, 5, 10, 43, 34, 708504), datetime.datetime(2025, 2, 5, 10, 43, 34, 708504))
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | [cached since 410.6s ago] (8,)
2025-02-05 10:43:34 | INFO     | app.services.auth_service:register_user:49 | User registered successfully: test9756@example.com
2025-02-05 10:43:34 | INFO     | app.api.v1.endpoints.auth:register:20 | User registration successful for test9756@example.com
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55011 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:43:34 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:43:35 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for duplicate9315@example.com
2025-02-05 10:43:35 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: duplicate9315@example.com
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | [cached since 411.6s ago] ('duplicate9315@example.com',)
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | [cached since 411.6s ago] ('duplicate9315@example.com', '1stemailuser', b'$2b$12$hQ9nVPFm.kP5a3k.bPz0bu/Cc/TBzbBNI.fio2gpz5YdxhhUWjdDG', True, False, datetime.datetime(2025, 2, 5, 10, 43, 35, 718569), datetime.datetime(2025, 2, 5, 10, 43, 35, 718569))
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | [cached since 411.6s ago] (9,)
2025-02-05 10:43:35 | INFO     | app.services.auth_service:register_user:49 | User registered successfully: duplicate9315@example.com
2025-02-05 10:43:35 | INFO     | app.api.v1.endpoints.auth:register:20 | User registration successful for duplicate9315@example.com
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55016 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:43:35 | INFO     | app.api.v1.endpoints.auth:register:18 | Attempting user registration for duplicate9315@example.com
2025-02-05 10:43:35 | INFO     | app.services.auth_service:register_user:24 | Checking for existing user with email: duplicate9315@example.com
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | [cached since 411.9s ago] ('duplicate9315@example.com',)
2025-02-05 10:43:35 | WARNING  | app.services.auth_service:register_user:29 | Registration attempt with duplicate email: duplicate9315@example.com
2025-02-05 10:43:35 | WARNING  | app.api.v1.endpoints.auth:register:23 | Registration failed: Duplicate entity - A user with this email is already registered
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55016 - "POST /api/v1/auth/register HTTP/1.1" 400
2025-02-05 10:43:35 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-02-05 10:46:31 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 10:46:31 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 10:46:31 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 10:46:31 | INFO     | logging:callHandlers:1762 | Finished server process [6544]
2025-02-05 10:46:34 | INFO     | logging:callHandlers:1762 | Started server process [13892]
2025-02-05 10:46:34 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 10:46:34 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 10:47:07 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for test6442@example.com
2025-02-05 10:47:07 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: test6442@example.com
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:47:07 | INFO     | logging:callHandlers:1762 | [generated in 0.00099s] ('test6442@example.com',)
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | [generated in 0.00111s] ('test6442@example.com', 'Test User3', b'$2b$12$UwbN9Ie8yv7flthLtA63LeBc/ygTxdGJ63Go/w5TApJVagIy0KZQe', True, False, datetime.datetime(2025, 2, 5, 10, 47, 8, 76574), datetime.datetime(2025, 2, 5, 10, 47, 8, 76574))
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | [generated in 0.00102s] (10,)
2025-02-05 10:47:08 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: test6442@example.com
2025-02-05 10:47:08 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for test6442@example.com
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55059 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:47:08 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for duplicate7962@example.com
2025-02-05 10:47:08 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: duplicate7962@example.com
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:47:08 | INFO     | logging:callHandlers:1762 | [cached since 1.118s ago] ('duplicate7962@example.com',)
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | [cached since 1.115s ago] ('duplicate7962@example.com', '1stemailuser', b'$2b$12$YIacmZg56SAnLB.cB8LE6uHAHvVH0B2NnZu1raYHKdC/gfwCkK.TO', True, False, datetime.datetime(2025, 2, 5, 10, 47, 9, 190361), datetime.datetime(2025, 2, 5, 10, 47, 9, 190361))
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | [cached since 1.113s ago] (11,)
2025-02-05 10:47:09 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: duplicate7962@example.com
2025-02-05 10:47:09 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for duplicate7962@example.com
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55065 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:47:09 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for duplicate7962@example.com
2025-02-05 10:47:09 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: duplicate7962@example.com
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | [cached since 1.367s ago] ('duplicate7962@example.com',)
2025-02-05 10:47:09 | WARNING  | app.services.auth_service:register_user:32 | Registration attempt with duplicate email: duplicate7962@example.com
2025-02-05 10:47:09 | WARNING  | app.api.v1.endpoints.auth:register:27 | Registration failed: Duplicate entity - A user with this email is already registered
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55065 - "POST /api/v1/auth/register HTTP/1.1" 400
2025-02-05 10:47:09 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 400 Bad Request"
2025-02-05 10:55:33 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 10:55:33 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 10:55:33 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 10:55:33 | INFO     | logging:callHandlers:1762 | Finished server process [13892]
2025-02-05 10:55:36 | INFO     | logging:callHandlers:1762 | Started server process [19964]
2025-02-05 10:55:36 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 10:55:36 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 10:55:38 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for bytepass@test.com
2025-02-05 10:55:38 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: bytepass@test.com
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | [generated in 0.00150s] ('bytepass@test.com',)
2025-02-05 10:55:39 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - bytepass@test.com
2025-02-05 10:55:39 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for bytepass@test.com: Incorrect email or password
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:55:39 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55141 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 10:56:05 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for test@example.com
2025-02-05 10:56:05 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: test@example.com
2025-02-05 10:56:05 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:56:05 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:56:05 | INFO     | logging:callHandlers:1762 | [cached since 26.13s ago] ('test@example.com',)
2025-02-05 10:56:05 | INFO     | app.services.auth_service:authenticate_user:107 | User authenticated successfully: test@example.com
2025-02-05 10:56:05 | INFO     | app.services.auth_service:login:130 | Tokens generated for user: test@example.com
2025-02-05 10:56:05 | INFO     | app.api.v1.endpoints.auth:login:40 | Successful login for test@example.com
2025-02-05 10:56:05 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:56:05 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55150 - "POST /api/v1/auth/token HTTP/1.1" 200
2025-02-05 10:56:26 | INFO     | app.api.v1.endpoints.auth:refresh_token:58 | Attempting token refresh
2025-02-05 10:56:26 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:56:26 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:56:26 | INFO     | logging:callHandlers:1762 | [cached since 47.45s ago] ('test@example.com',)
2025-02-05 10:56:26 | INFO     | app.api.v1.endpoints.auth:refresh_token:60 | Token refresh successful
2025-02-05 10:56:26 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:56:26 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55153 - "POST /api/v1/auth/refresh-token HTTP/1.1" 200
2025-02-05 10:56:58 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 10:56:58 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 10:56:58 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 10:56:58 | INFO     | logging:callHandlers:1762 | Finished server process [19964]
2025-02-05 10:57:00 | INFO     | logging:callHandlers:1762 | Started server process [9456]
2025-02-05 10:57:00 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 10:57:00 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 10:58:36 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 10:58:36 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 10:58:36 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 10:58:36 | INFO     | logging:callHandlers:1762 | Finished server process [9456]
2025-02-05 10:58:39 | INFO     | logging:callHandlers:1762 | Started server process [3584]
2025-02-05 10:58:39 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 10:58:39 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 10:58:48 | INFO     | tests.integration.test_auth:test_user_registration:31 | Attempting registration for z87j14e9mu@example.com
2025-02-05 10:58:48 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for z87j14e9mu@example.com
2025-02-05 10:58:48 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: z87j14e9mu@example.com
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:58:48 | INFO     | logging:callHandlers:1762 | [generated in 0.00156s] ('z87j14e9mu@example.com',)
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | [generated in 0.00124s] ('z87j14e9mu@example.com', 'New User', b'$2b$12$DGcG7gcBt2OS2h9HEODdTeh6zPfozhD3rPmcRs.CiKKw5OtgzYBcy', True, False, datetime.datetime(2025, 2, 5, 10, 58, 49, 53121), datetime.datetime(2025, 2, 5, 10, 58, 49, 53121))
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | [generated in 0.00118s] (12,)
2025-02-05 10:58:49 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: z87j14e9mu@example.com
2025-02-05 10:58:49 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for z87j14e9mu@example.com
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55205 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 10:58:49 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 10:58:49 | INFO     | tests.integration.test_auth:test_user_registration:33 | Registration response status: 201
2025-02-05 10:58:51 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:86 | Attempting login with invalid credentials for e55sixz3w5@example.com
2025-02-05 10:58:51 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for e55sixz3w5@example.com
2025-02-05 10:58:51 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: e55sixz3w5@example.com
2025-02-05 10:58:51 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 10:58:51 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 10:58:51 | INFO     | logging:callHandlers:1762 | [cached since 2.82s ago] ('e55sixz3w5@example.com',)
2025-02-05 10:58:51 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - e55sixz3w5@example.com
2025-02-05 10:58:51 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for e55sixz3w5@example.com: Incorrect email or password
2025-02-05 10:58:51 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 10:58:51 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55216 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 10:58:51 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 10:58:51 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:88 | Invalid login response status: 401
2025-02-05 10:58:52 | INFO     | tests.integration.test_auth:test_invalid_token_validation:98 | Attempting to validate invalid token
2025-02-05 10:58:52 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 10:58:52 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 10:58:52 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55221 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 10:58:52 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 10:58:52 | INFO     | tests.integration.test_auth:test_invalid_token_validation:100 | Invalid token validation status: 401
2025-02-05 11:07:33 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:07:33 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:07:33 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:07:33 | INFO     | logging:callHandlers:1762 | Finished server process [3584]
2025-02-05 11:07:36 | INFO     | logging:callHandlers:1762 | Started server process [23216]
2025-02-05 11:07:36 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:07:36 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 11:07:49 | INFO     | tests.integration.test_auth:test_user_registration:31 | Attempting registration for e06f2nlytu@example.com
2025-02-05 11:07:49 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for e06f2nlytu@example.com
2025-02-05 11:07:49 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: e06f2nlytu@example.com
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | [generated in 0.00135s] ('e06f2nlytu@example.com',)
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | [generated in 0.00119s] ('e06f2nlytu@example.com', 'New User', b'$2b$12$wyTvND8LbiRMkWAQkP5pmOPDm2kZowtxNwef8KdL0UIdT9vz7Q0Oq', True, False, datetime.datetime(2025, 2, 5, 11, 7, 49, 425220), datetime.datetime(2025, 2, 5, 11, 7, 49, 425220))
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | [generated in 0.00091s] (13,)
2025-02-05 11:07:49 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: e06f2nlytu@example.com
2025-02-05 11:07:49 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for e06f2nlytu@example.com
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55323 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 11:07:49 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 11:07:49 | INFO     | tests.integration.test_auth:test_user_registration:33 | Registration response status: 201
2025-02-05 11:07:52 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:94 | Attempting login with invalid credentials for 26i6h53eif@example.com
2025-02-05 11:07:52 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for 26i6h53eif@example.com
2025-02-05 11:07:52 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: 26i6h53eif@example.com
2025-02-05 11:07:52 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:07:52 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 11:07:52 | INFO     | logging:callHandlers:1762 | [cached since 2.99s ago] ('26i6h53eif@example.com',)
2025-02-05 11:07:52 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - 26i6h53eif@example.com
2025-02-05 11:07:52 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for 26i6h53eif@example.com: Incorrect email or password
2025-02-05 11:07:52 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 11:07:52 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55333 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 11:07:52 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 11:07:52 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:96 | Invalid login response status: 401
2025-02-05 11:07:53 | INFO     | tests.integration.test_auth:test_invalid_token_validation:106 | Attempting to validate invalid token
2025-02-05 11:07:53 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 11:07:53 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 11:07:53 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55338 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 11:07:53 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 11:07:53 | INFO     | tests.integration.test_auth:test_invalid_token_validation:108 | Invalid token validation status: 401
2025-02-05 11:09:16 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:09:16 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:09:16 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:09:16 | INFO     | logging:callHandlers:1762 | Finished server process [23216]
2025-02-05 11:09:19 | INFO     | logging:callHandlers:1762 | Started server process [2444]
2025-02-05 11:09:19 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:09:19 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 11:16:39 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:16:39 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:16:39 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:16:39 | INFO     | logging:callHandlers:1762 | Finished server process [2444]
2025-02-05 11:16:42 | INFO     | logging:callHandlers:1762 | Started server process [13724]
2025-02-05 11:16:42 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:16:42 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 11:19:22 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:19:22 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:19:22 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:19:22 | INFO     | logging:callHandlers:1762 | Finished server process [13724]
2025-02-05 11:19:25 | INFO     | logging:callHandlers:1762 | Started server process [21896]
2025-02-05 11:19:25 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:19:25 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 11:21:12 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:21:12 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:21:12 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:21:12 | INFO     | logging:callHandlers:1762 | Finished server process [21896]
2025-02-05 11:21:14 | INFO     | logging:callHandlers:1762 | Started server process [7812]
2025-02-05 11:21:14 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:21:14 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 11:21:19 | INFO     | tests.integration.test_auth:test_user_registration:30 | Attempting registration for w8x6igb92l@example.com
2025-02-05 11:21:19 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for w8x6igb92l@example.com
2025-02-05 11:21:19 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: w8x6igb92l@example.com
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 11:21:19 | INFO     | logging:callHandlers:1762 | [generated in 0.00090s] ('w8x6igb92l@example.com',)
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | [generated in 0.00111s] ('w8x6igb92l@example.com', 'New User', b'$2b$12$0/bAHVht8tt4ziyBorn/Z.IB5/cv4E28B5vwlIp2PNAG/.VceY456', True, False, datetime.datetime(2025, 2, 5, 11, 21, 20, 58743), datetime.datetime(2025, 2, 5, 11, 21, 20, 58743))
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | [generated in 0.00102s] (14,)
2025-02-05 11:21:20 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: w8x6igb92l@example.com
2025-02-05 11:21:20 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for w8x6igb92l@example.com
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55559 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 11:21:20 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 11:21:20 | INFO     | tests.integration.test_auth:test_user_registration:32 | Registration response status: 201
2025-02-05 11:21:22 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:86 | Attempting login with invalid credentials for e27oaeyaa7@example.com
2025-02-05 11:21:22 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for e27oaeyaa7@example.com
2025-02-05 11:21:22 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: e27oaeyaa7@example.com
2025-02-05 11:21:22 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:21:22 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 11:21:22 | INFO     | logging:callHandlers:1762 | [cached since 2.295s ago] ('e27oaeyaa7@example.com',)
2025-02-05 11:21:22 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - e27oaeyaa7@example.com
2025-02-05 11:21:22 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for e27oaeyaa7@example.com: Incorrect email or password
2025-02-05 11:21:22 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 11:21:22 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55569 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 11:21:22 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 11:21:22 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:88 | Invalid login response status: 401
2025-02-05 11:21:22 | INFO     | tests.integration.test_auth:test_invalid_token_validation:98 | Attempting to validate invalid token
2025-02-05 11:21:22 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 11:21:22 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 11:21:22 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55574 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 11:21:22 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 11:21:22 | INFO     | tests.integration.test_auth:test_invalid_token_validation:100 | Invalid token validation status: 401
2025-02-05 11:22:19 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:22:19 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:22:19 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:22:19 | INFO     | logging:callHandlers:1762 | Finished server process [7812]
2025-02-05 11:22:21 | INFO     | logging:callHandlers:1762 | Started server process [24272]
2025-02-05 11:22:21 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:22:21 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 11:22:37 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:22:38 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:22:38 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:22:38 | INFO     | logging:callHandlers:1762 | Finished server process [24272]
2025-02-05 11:22:39 | INFO     | logging:callHandlers:1762 | Started server process [18736]
2025-02-05 11:22:39 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:22:39 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 11:22:44 | INFO     | tests.integration.test_auth:test_user_registration:32 | Attempting registration for jluer759bl@example.com
2025-02-05 11:22:44 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for jluer759bl@example.com
2025-02-05 11:22:44 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: jluer759bl@example.com
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 11:22:44 | INFO     | logging:callHandlers:1762 | [generated in 0.00115s] ('jluer759bl@example.com',)
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | [generated in 0.00107s] ('jluer759bl@example.com', 'New User', b'$2b$12$ZveVqfc4uGWCzoRIN4cth.Zo6gC8AEmoYwalXAdwsmUqbDK2h3NIe', True, False, datetime.datetime(2025, 2, 5, 11, 22, 45, 63248), datetime.datetime(2025, 2, 5, 11, 22, 45, 63248))
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | [generated in 0.00089s] (15,)
2025-02-05 11:22:45 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: jluer759bl@example.com
2025-02-05 11:22:45 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for jluer759bl@example.com
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55603 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 11:22:45 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 11:22:45 | INFO     | tests.integration.test_auth:test_user_registration:34 | Registration response status: 201
2025-02-05 11:22:47 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:90 | Attempting login with invalid credentials for zwtgjaerlf@example.com
2025-02-05 11:22:47 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for zwtgjaerlf@example.com
2025-02-05 11:22:47 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: zwtgjaerlf@example.com
2025-02-05 11:22:47 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:22:47 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 11:22:47 | INFO     | logging:callHandlers:1762 | [cached since 2.3s ago] ('zwtgjaerlf@example.com',)
2025-02-05 11:22:47 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - zwtgjaerlf@example.com
2025-02-05 11:22:47 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for zwtgjaerlf@example.com: Incorrect email or password
2025-02-05 11:22:47 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 11:22:47 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55613 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 11:22:47 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 11:22:47 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:92 | Invalid login response status: 401
2025-02-05 11:22:47 | INFO     | tests.integration.test_auth:test_invalid_token_validation:103 | Attempting to validate invalid token
2025-02-05 11:22:47 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 11:22:47 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 11:22:47 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55618 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 11:22:47 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 11:22:47 | INFO     | tests.integration.test_auth:test_invalid_token_validation:105 | Invalid token validation status: 401
2025-02-05 11:27:16 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:27:17 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:27:17 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:27:17 | INFO     | logging:callHandlers:1762 | Finished server process [18736]
2025-02-05 11:27:18 | INFO     | logging:callHandlers:1762 | Started server process [14552]
2025-02-05 11:27:18 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:27:18 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 11:27:23 | INFO     | tests.integration.test_auth:test_user_registration:33 | Attempting registration for stsa0az8tc@example.com
2025-02-05 11:27:23 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for stsa0az8tc@example.com
2025-02-05 11:27:23 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: stsa0az8tc@example.com
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00135s] ('stsa0az8tc@example.com',)
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00099s] ('stsa0az8tc@example.com', 'New User', b'$2b$12$3v5zWQ0y/wi.m8/BAeFDzO6pDYXZqA66poJqZjyzJMIkhZy.3HbRS', True, False, datetime.datetime(2025, 2, 5, 11, 27, 24, 361158), datetime.datetime(2025, 2, 5, 11, 27, 24, 361158))
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00099s] (16,)
2025-02-05 11:27:24 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: stsa0az8tc@example.com
2025-02-05 11:27:24 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for stsa0az8tc@example.com
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55685 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 11:27:24 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 11:27:24 | INFO     | tests.integration.test_auth:test_user_registration:35 | Registration response status: 201
2025-02-05 11:27:26 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:92 | Attempting login with invalid credentials for 3tkmh6y6bl@example.com
2025-02-05 11:27:26 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for 3tkmh6y6bl@example.com
2025-02-05 11:27:26 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: 3tkmh6y6bl@example.com
2025-02-05 11:27:26 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 11:27:26 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 11:27:26 | INFO     | logging:callHandlers:1762 | [cached since 2.5s ago] ('3tkmh6y6bl@example.com',)
2025-02-05 11:27:26 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - 3tkmh6y6bl@example.com
2025-02-05 11:27:26 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for 3tkmh6y6bl@example.com: Incorrect email or password
2025-02-05 11:27:26 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 11:27:26 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55695 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 11:27:26 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 11:27:26 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:94 | Invalid login response status: 401
2025-02-05 11:27:27 | INFO     | tests.integration.test_auth:test_invalid_token_validation:105 | Attempting to validate invalid token
2025-02-05 11:27:27 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 11:27:27 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 11:27:27 | INFO     | logging:callHandlers:1762 | 127.0.0.1:55700 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 11:27:27 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 11:27:27 | INFO     | tests.integration.test_auth:test_invalid_token_validation:107 | Invalid token validation status: 401
2025-02-05 11:28:17 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 11:28:17 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 11:28:17 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 11:28:17 | INFO     | logging:callHandlers:1762 | Finished server process [14552]
2025-02-05 11:28:19 | INFO     | logging:callHandlers:1762 | Started server process [1940]
2025-02-05 11:28:19 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 11:28:19 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 13:33:37 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 13:33:37 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 13:33:37 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 13:33:37 | INFO     | logging:callHandlers:1762 | Finished server process [1940]
2025-02-05 13:33:39 | INFO     | logging:callHandlers:1762 | Started server process [16816]
2025-02-05 13:33:39 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 13:33:39 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 13:36:00 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 13:36:00 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 13:36:00 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 13:36:00 | INFO     | logging:callHandlers:1762 | Finished server process [16816]
2025-02-05 13:36:02 | INFO     | logging:callHandlers:1762 | Started server process [18472]
2025-02-05 13:36:02 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 13:36:02 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 13:36:18 | INFO     | tests.integration.test_auth:test_user_registration:33 | Attempting registration for g8fxx77qh2@example.com
2025-02-05 13:36:18 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for g8fxx77qh2@example.com
2025-02-05 13:36:18 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: g8fxx77qh2@example.com
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | [generated in 0.00088s] ('g8fxx77qh2@example.com',)
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | [generated in 0.00102s] ('g8fxx77qh2@example.com', 'New User', b'$2b$12$pImyl4VTSk4P8Q7J/kTbnOXuCsVhrOIFOIjiEOA.c7Mh1p/PMgCVm', True, False, datetime.datetime(2025, 2, 5, 13, 36, 18, 767929), datetime.datetime(2025, 2, 5, 13, 36, 18, 767929))
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | [generated in 0.00116s] (17,)
2025-02-05 13:36:18 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: g8fxx77qh2@example.com
2025-02-05 13:36:18 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for g8fxx77qh2@example.com
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | 127.0.0.1:56994 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 13:36:18 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 13:36:18 | INFO     | tests.integration.test_auth:test_user_registration:35 | Registration response status: 201
2025-02-05 13:36:21 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:92 | Attempting login with invalid credentials for yst0gd9al5@example.com
2025-02-05 13:36:21 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for yst0gd9al5@example.com
2025-02-05 13:36:21 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: yst0gd9al5@example.com
2025-02-05 13:36:21 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 13:36:21 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 13:36:21 | INFO     | logging:callHandlers:1762 | [cached since 2.519s ago] ('yst0gd9al5@example.com',)
2025-02-05 13:36:21 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - yst0gd9al5@example.com
2025-02-05 13:36:21 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for yst0gd9al5@example.com: Incorrect email or password
2025-02-05 13:36:21 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 13:36:21 | INFO     | logging:callHandlers:1762 | 127.0.0.1:57004 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 13:36:21 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 13:36:21 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:94 | Invalid login response status: 401
2025-02-05 13:36:21 | INFO     | tests.integration.test_auth:test_invalid_token_validation:105 | Attempting to validate invalid token
2025-02-05 13:36:21 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 13:36:21 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 13:36:21 | INFO     | logging:callHandlers:1762 | 127.0.0.1:57009 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 13:36:21 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 13:36:21 | INFO     | tests.integration.test_auth:test_invalid_token_validation:107 | Invalid token validation status: 401
2025-02-05 13:37:03 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 13:37:03 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 13:37:03 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 13:37:03 | INFO     | logging:callHandlers:1762 | Finished server process [18472]
2025-02-05 13:37:05 | INFO     | logging:callHandlers:1762 | Started server process [13804]
2025-02-05 13:37:05 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 13:37:05 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 13:48:28 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 13:48:29 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 13:48:29 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 13:48:29 | INFO     | logging:callHandlers:1762 | Finished server process [13804]
2025-02-05 13:48:30 | INFO     | logging:callHandlers:1762 | Started server process [13600]
2025-02-05 13:48:30 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 13:48:30 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 13:49:57 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for test@example.com
2025-02-05 13:49:57 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: test@example.com
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | [generated in 0.00099s] ('test@example.com',)
2025-02-05 13:49:57 | INFO     | app.services.auth_service:authenticate_user:107 | User authenticated successfully: test@example.com
2025-02-05 13:49:57 | INFO     | app.services.auth_service:login:130 | Tokens generated for user: test@example.com
2025-02-05 13:49:57 | INFO     | app.api.v1.endpoints.auth:login:40 | Successful login for test@example.com
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 13:49:57 | INFO     | logging:callHandlers:1762 | 127.0.0.1:57361 - "POST /api/v1/auth/token HTTP/1.1" 200
2025-02-05 13:55:13 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 13:55:13 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 13:55:13 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 13:55:13 | INFO     | logging:callHandlers:1762 | Finished server process [13600]
2025-02-05 13:55:15 | INFO     | logging:callHandlers:1762 | Started server process [20184]
2025-02-05 13:55:15 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 13:55:15 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 13:58:51 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 13:58:51 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 13:58:51 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 13:58:51 | INFO     | logging:callHandlers:1762 | Finished server process [20184]
2025-02-05 13:58:52 | INFO     | logging:callHandlers:1762 | Started server process [19412]
2025-02-05 13:58:52 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 13:58:52 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 13:59:30 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 13:59:30 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 13:59:30 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 13:59:30 | INFO     | logging:callHandlers:1762 | Finished server process [19412]
2025-02-05 13:59:32 | INFO     | logging:callHandlers:1762 | Started server process [13892]
2025-02-05 13:59:32 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 13:59:32 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 14:00:07 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 14:00:07 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 14:00:07 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 14:00:07 | INFO     | logging:callHandlers:1762 | Finished server process [13892]
2025-02-05 14:00:09 | INFO     | logging:callHandlers:1762 | Started server process [23292]
2025-02-05 14:00:09 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 14:00:09 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 14:01:10 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 14:01:10 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 14:01:10 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 14:01:10 | INFO     | logging:callHandlers:1762 | Finished server process [23292]
2025-02-05 14:01:12 | INFO     | logging:callHandlers:1762 | Started server process [23008]
2025-02-05 14:01:12 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 14:01:12 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 14:01:19 | INFO     | tests.integration.test_auth:test_user_registration:33 | Attempting registration for 22x08e0s2a@example.com
2025-02-05 14:01:19 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for 22x08e0s2a@example.com
2025-02-05 14:01:19 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: 22x08e0s2a@example.com
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | [generated in 0.00119s] ('22x08e0s2a@example.com',)
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | [generated in 0.00096s] ('22x08e0s2a@example.com', 'New User', b'$2b$12$b.cuTJKbC7Wdu1XNCAE/duLF5w4yAcF7PuzzO9XoIBZBr1kBzHteK', True, False, datetime.datetime(2025, 2, 5, 14, 1, 19, 753853), datetime.datetime(2025, 2, 5, 14, 1, 19, 753853))
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | [generated in 0.00120s] (18,)
2025-02-05 14:01:19 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: 22x08e0s2a@example.com
2025-02-05 14:01:19 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for 22x08e0s2a@example.com
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | 127.0.0.1:57593 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 14:01:19 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 14:01:19 | INFO     | tests.integration.test_auth:test_user_registration:35 | Registration response status: 201
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | [generated in 0.00032s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-02-05 14:01:20 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 14:01:20 | ERROR    | logging:callHandlers:1762 | an error occurred during closing of asynchronous generator <async_generator object db_session at 0x000001D971707F10>
asyncgen: <async_generator object db_session at 0x000001D971707F10>
Traceback (most recent call last):

  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\tests\conftest.py", line 31, in db_session
    yield session
          └ <sqlalchemy.orm.session.AsyncSession object at 0x000001D9716C6060>

GeneratorExit


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Scripts\pytest.exe\__main__.py", line 7, in <module>

  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\config\__init__.py", line 201, in console_main
    code = main()
           └ <function main at 0x000001D96C6F5B20>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\config\__init__.py", line 175, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
         │                │      │    │                          └ <_pytest.config.Config object at 0x000001D96C7B7D40>
         │                │      │    └ <HookCaller 'pytest_cmdline_main'>
         │                │      └ <_pytest.config.compat.PathAwareHookProxy object at 0x000001D96C8CCFB0>
         │                └ <_pytest.config.Config object at 0x000001D96C7B7D40>
         └ <enum 'ExitCode'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_hooks.py", line 513, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           │    │         │    │     │    │                  │       └ True
           │    │         │    │     │    │                  └ {'config': <_pytest.config.Config object at 0x000001D96C7B7D40>}
           │    │         │    │     │    └ <member '_hookimpls' of 'HookCaller' objects>
           │    │         │    │     └ <HookCaller 'pytest_cmdline_main'>
           │    │         │    └ <member 'name' of 'HookCaller' objects>
           │    │         └ <HookCaller 'pytest_cmdline_main'>
           │    └ <member '_hookexec' of 'HookCaller' objects>
           └ <HookCaller 'pytest_cmdline_main'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           │    │               │          │        │       └ True
           │    │               │          │        └ {'config': <_pytest.config.Config object at 0x000001D96C7B7D40>}
           │    │               │          └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\venv...
           │    │               └ 'pytest_cmdline_main'
           │    └ <function _multicall at 0x000001D96C1ECC20>
           └ <_pytest.config.PytestPluginManager object at 0x000001D96BC65640>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_callers.py", line 103, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x000001D96C7B7D40>]
          │         └ <member 'function' of 'HookImpl' objects>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\venv\...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\main.py", line 330, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x000001D96C776980>
           │            └ <_pytest.config.Config object at 0x000001D96C7B7D40>
           └ <function wrap_session at 0x000001D96C776840>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\main.py", line 283, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>
    │       │            │    └ <_pytest.config.Config object at 0x000001D96C7B7D40>
    │       │            └ <function _main at 0x000001D96C776980>
    │       └ <ExitCode.OK: 0>
    └ <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\main.py", line 337, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>
    │      │    └ <HookCaller 'pytest_runtestloop'>
    │      └ <_pytest.config.compat.PathAwareHookProxy object at 0x000001D96C8CCFB0>
    └ <_pytest.config.Config object at 0x000001D96C7B7D40>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_hooks.py", line 513, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           │    │         │    │     │    │                  │       └ True
           │    │         │    │     │    │                  └ {'session': <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>}
           │    │         │    │     │    └ <member '_hookimpls' of 'HookCaller' objects>
           │    │         │    │     └ <HookCaller 'pytest_runtestloop'>
           │    │         │    └ <member 'name' of 'HookCaller' objects>
           │    │         └ <HookCaller 'pytest_runtestloop'>
           │    └ <member '_hookexec' of 'HookCaller' objects>
           └ <HookCaller 'pytest_runtestloop'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           │    │               │          │        │       └ True
           │    │               │          │        └ {'session': <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>}
           │    │               │          └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\venv...
           │    │               └ 'pytest_runtestloop'
           │    └ <function _multicall at 0x000001D96C1ECC20>
           └ <_pytest.config.PytestPluginManager object at 0x000001D96BC65640>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_callers.py", line 103, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>]
          │         └ <member 'function' of 'HookImpl' objects>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\venv\...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\main.py", line 362, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │                                        │              └ <Coroutine test_login_invalid_credentials>
    │    │                                        └ <Coroutine test_user_login_and_token_flow>
    │    └ <member 'config' of 'Node' objects>
    └ <Coroutine test_user_login_and_token_flow>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_hooks.py", line 513, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           │    │         │    │     │    │                  │       └ True
           │    │         │    │     │    │                  └ {'item': <Coroutine test_user_login_and_token_flow>, 'nextitem': <Coroutine test_login_invalid_credentials>}
           │    │         │    │     │    └ <member '_hookimpls' of 'HookCaller' objects>
           │    │         │    │     └ <HookCaller 'pytest_runtest_protocol'>
           │    │         │    └ <member 'name' of 'HookCaller' objects>
           │    │         └ <HookCaller 'pytest_runtest_protocol'>
           │    └ <member '_hookexec' of 'HookCaller' objects>
           └ <HookCaller 'pytest_runtest_protocol'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           │    │               │          │        │       └ True
           │    │               │          │        └ {'item': <Coroutine test_user_login_and_token_flow>, 'nextitem': <Coroutine test_login_invalid_credentials>}
           │    │               │          └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\...
           │    │               └ 'pytest_runtest_protocol'
           │    └ <function _multicall at 0x000001D96C1ECC20>
           └ <_pytest.config.PytestPluginManager object at 0x000001D96BC65640>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_callers.py", line 103, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Coroutine test_user_login_and_token_flow>, <Coroutine test_login_invalid_credentials>]
          │         └ <member 'function' of 'HookImpl' objects>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\v...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 113, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ <Coroutine test_login_invalid_credentials>
    │               └ <Coroutine test_user_login_and_token_flow>
    └ <function runtestprotocol at 0x000001D96C775B20>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "teardown", log, nextitem=nextitem))
    │       │      │               │                 │             └ <Coroutine test_login_invalid_credentials>
    │       │      │               │                 └ True
    │       │      │               └ <Coroutine test_user_login_and_token_flow>
    │       │      └ <function call_and_report at 0x000001D96C775F80>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/integration/test_auth.py::test_user_login_and_token_flow' when='setup' outcome='passed'>, <TestReport 'te...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 241, in call_and_report
    call = CallInfo.from_call(
           │        └ <classmethod(<function CallInfo.from_call at 0x000001D96C7762A0>)>
           └ <class '_pytest.runner.CallInfo'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 341, in from_call
    result: TResult | None = func()
            │                └ <function call_and_report.<locals>.<lambda> at 0x000001D97178A200>
            └ +TResult
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 242, in <lambda>
    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
            │                 │       └ {'nextitem': <Coroutine test_login_invalid_credentials>}
            │                 └ <Coroutine test_user_login_and_token_flow>
            └ <HookCaller 'pytest_runtest_teardown'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_hooks.py", line 513, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           │    │         │    │     │    │                  │       └ False
           │    │         │    │     │    │                  └ {'item': <Coroutine test_user_login_and_token_flow>, 'nextitem': <Coroutine test_login_invalid_credentials>}
           │    │         │    │     │    └ <member '_hookimpls' of 'HookCaller' objects>
           │    │         │    │     └ <HookCaller 'pytest_runtest_teardown'>
           │    │         │    └ <member 'name' of 'HookCaller' objects>
           │    │         └ <HookCaller 'pytest_runtest_teardown'>
           │    └ <member '_hookexec' of 'HookCaller' objects>
           └ <HookCaller 'pytest_runtest_teardown'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           │    │               │          │        │       └ False
           │    │               │          │        └ {'item': <Coroutine test_user_login_and_token_flow>, 'nextitem': <Coroutine test_login_invalid_credentials>}
           │    │               │          └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\...
           │    │               └ 'pytest_runtest_teardown'
           │    └ <function _multicall at 0x000001D96C1ECC20>
           └ <_pytest.config.PytestPluginManager object at 0x000001D96BC65640>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_callers.py", line 103, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Coroutine test_user_login_and_token_flow>, <Coroutine test_login_invalid_credentials>]
          │         └ <member 'function' of 'HookImpl' objects>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\v...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 189, in pytest_runtest_teardown
    item.session._setupstate.teardown_exact(nextitem)
    │    │                                  └ <Coroutine test_login_invalid_credentials>
    │    └ <member 'session' of 'Node' objects>
    └ <Coroutine test_user_login_and_token_flow>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 546, in teardown_exact
    fin()
    └ functools.partial(<bound method FixtureDef.finish of <FixtureDef argname='event_loop' scope='function' baseid=''>>, request=<...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\fixtures.py", line 1021, in finish
    fin()
    └ functools.partial(<function _teardown_yield_fixture at 0x000001D96C7BC360>, <function event_loop at 0x000001D96D4FB7E0>, <gen...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\fixtures.py", line 907, in _teardown_yield_fixture
    next(it)
         └ <generator object event_loop at 0x000001D9715BD120>
  File "c:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pytest_asyncio\plugin.py", line 1151, in event_loop
    with _temporary_event_loop_policy(new_loop_policy), _provide_event_loop() as loop:
         │                            │                 │                        └ <ProactorEventLoop running=True closed=False debug=False>
         │                            │                 └ <function _provide_event_loop at 0x000001D96D4FB9C0>
         │                            └ <asyncio.windows_events.WindowsProactorEventLoopPolicy object at 0x000001D9713A3CB0>
         └ <function _temporary_event_loop_policy at 0x000001D96D4FAE80>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
         │    └ <generator object _provide_event_loop at 0x000001D971705990>
         └ <contextlib._GeneratorContextManager object at 0x000001D97178C320>
  File "c:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pytest_asyncio\plugin.py", line 1170, in _provide_event_loop
    loop.run_until_complete(loop.shutdown_asyncgens())
    │    │                  │    └ <function BaseEventLoop.shutdown_asyncgens at 0x000001D96D482C00>
    │    │                  └ <ProactorEventLoop running=True closed=False debug=False>
    │    └ <function BaseEventLoop.run_until_complete at 0x000001D96D482F20>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 673, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001D96D4F8220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\windows_events.py", line 322, in run_forever
    super().run_forever()
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 640, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001D96D484CC0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 1993, in _run_once
    handle = None  # Needed to break cycles when an exception occurs.
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\events.py", line 103, in _run
    self = None  # Needed to break cycles when an exception occurs.

> File "C:\Users\pedro\VSCode Projects\ecom-api\backend\tests\conftest.py", line 27, in db_session
    async with test_engine.begin() as connection:
               │           │          └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x000001D96FDF2C10>
               │           └ <function AsyncEngine.begin at 0x000001D96F366F20>
               └ <sqlalchemy.ext.asyncio.engine.AsyncEngine object at 0x000001D9714E5250>

  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
          │    │   │      └ GeneratorExit()
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object AsyncEngine.begin at 0x000001D97179C130>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001D97178C770>

RuntimeError: athrow(): asynchronous generator is already running
2025-02-05 14:01:21 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:92 | Attempting login with invalid credentials for c1kkwz1hai@example.com
2025-02-05 14:01:21 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for c1kkwz1hai@example.com
2025-02-05 14:01:21 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: c1kkwz1hai@example.com
2025-02-05 14:01:21 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:01:21 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 14:01:21 | INFO     | logging:callHandlers:1762 | [cached since 2.437s ago] ('c1kkwz1hai@example.com',)
2025-02-05 14:01:21 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - c1kkwz1hai@example.com
2025-02-05 14:01:21 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for c1kkwz1hai@example.com: Incorrect email or password
2025-02-05 14:01:21 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 14:01:21 | INFO     | logging:callHandlers:1762 | 127.0.0.1:57605 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 14:01:21 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 14:01:21 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:94 | Invalid login response status: 401
2025-02-05 14:01:22 | INFO     | tests.integration.test_auth:test_invalid_token_validation:105 | Attempting to validate invalid token
2025-02-05 14:01:22 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 14:01:22 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 14:01:22 | INFO     | logging:callHandlers:1762 | 127.0.0.1:57610 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 14:01:22 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 14:01:22 | INFO     | tests.integration.test_auth:test_invalid_token_validation:107 | Invalid token validation status: 401
2025-02-05 14:01:23 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:01:23 | INFO     | logging:callHandlers:1762 | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-02-05 14:01:23 | INFO     | logging:callHandlers:1762 | [cached since 2.95s ago] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-02-05 14:01:23 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 14:06:11 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 14:06:11 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 14:06:11 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 14:06:11 | INFO     | logging:callHandlers:1762 | Finished server process [23008]
2025-02-05 14:06:13 | INFO     | logging:callHandlers:1762 | Started server process [15224]
2025-02-05 14:06:13 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 14:06:13 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 14:14:49 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 14:14:49 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 14:14:49 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 14:14:49 | INFO     | logging:callHandlers:1762 | Finished server process [15224]
2025-02-05 14:14:51 | INFO     | logging:callHandlers:1762 | Started server process [20692]
2025-02-05 14:14:51 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 14:14:51 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 14:54:34 | INFO     | tests.integration.test_auth:test_user_registration:33 | Attempting registration for 13cdjjje8n@example.com
2025-02-05 14:54:34 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for 13cdjjje8n@example.com
2025-02-05 14:54:34 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: 13cdjjje8n@example.com
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | [generated in 0.00118s] ('13cdjjje8n@example.com',)
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 14:54:34 | INFO     | logging:callHandlers:1762 | [generated in 0.00105s] ('13cdjjje8n@example.com', 'New User', b'$2b$12$s.aO70SCrY4oJxorjgz1I.oe72obK8Xk7pUf.1o2Aq5mw0z1d.js6', True, False, datetime.datetime(2025, 2, 5, 14, 54, 34, 996442), datetime.datetime(2025, 2, 5, 14, 54, 34, 996442))
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | [generated in 0.00093s] (19,)
2025-02-05 14:54:35 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: 13cdjjje8n@example.com
2025-02-05 14:54:35 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for 13cdjjje8n@example.com
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | 127.0.0.1:58329 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 14:54:35 | INFO     | tests.integration.test_auth:test_user_registration:35 | Registration response status: 201
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-02-05 14:54:35 | INFO     | logging:callHandlers:1762 | [generated in 0.00035s] ('users', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-02-05 14:54:36 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 14:54:36 | ERROR    | logging:callHandlers:1762 | an error occurred during closing of asynchronous generator <async_generator object db_session at 0x0000011D6C133F10>
asyncgen: <async_generator object db_session at 0x0000011D6C133F10>
Traceback (most recent call last):

  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\tests\conftest.py", line 31, in db_session
    yield session
          └ <sqlalchemy.orm.session.AsyncSession object at 0x0000011D6BBAF3B0>

GeneratorExit


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Scripts\pytest.exe\__main__.py", line 7, in <module>

  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\config\__init__.py", line 201, in console_main
    code = main()
           └ <function main at 0x0000011D671F5B20>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\config\__init__.py", line 175, in main
    ret: ExitCode | int = config.hook.pytest_cmdline_main(config=config)
         │                │      │    │                          └ <_pytest.config.Config object at 0x0000011D672B7D40>
         │                │      │    └ <HookCaller 'pytest_cmdline_main'>
         │                │      └ <_pytest.config.compat.PathAwareHookProxy object at 0x0000011D673CCFB0>
         │                └ <_pytest.config.Config object at 0x0000011D672B7D40>
         └ <enum 'ExitCode'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_hooks.py", line 513, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           │    │         │    │     │    │                  │       └ True
           │    │         │    │     │    │                  └ {'config': <_pytest.config.Config object at 0x0000011D672B7D40>}
           │    │         │    │     │    └ <member '_hookimpls' of 'HookCaller' objects>
           │    │         │    │     └ <HookCaller 'pytest_cmdline_main'>
           │    │         │    └ <member 'name' of 'HookCaller' objects>
           │    │         └ <HookCaller 'pytest_cmdline_main'>
           │    └ <member '_hookexec' of 'HookCaller' objects>
           └ <HookCaller 'pytest_cmdline_main'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           │    │               │          │        │       └ True
           │    │               │          │        └ {'config': <_pytest.config.Config object at 0x0000011D672B7D40>}
           │    │               │          └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\venv...
           │    │               └ 'pytest_cmdline_main'
           │    └ <function _multicall at 0x0000011D66CECC20>
           └ <_pytest.config.PytestPluginManager object at 0x0000011D66765640>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_callers.py", line 103, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<_pytest.config.Config object at 0x0000011D672B7D40>]
          │         └ <member 'function' of 'HookImpl' objects>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\venv\...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\main.py", line 330, in pytest_cmdline_main
    return wrap_session(config, _main)
           │            │       └ <function _main at 0x0000011D67276980>
           │            └ <_pytest.config.Config object at 0x0000011D672B7D40>
           └ <function wrap_session at 0x0000011D67276840>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\main.py", line 283, in wrap_session
    session.exitstatus = doit(config, session) or 0
    │       │            │    │       └ <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>
    │       │            │    └ <_pytest.config.Config object at 0x0000011D672B7D40>
    │       │            └ <function _main at 0x0000011D67276980>
    │       └ <ExitCode.OK: 0>
    └ <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\main.py", line 337, in _main
    config.hook.pytest_runtestloop(session=session)
    │      │    │                          └ <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>
    │      │    └ <HookCaller 'pytest_runtestloop'>
    │      └ <_pytest.config.compat.PathAwareHookProxy object at 0x0000011D673CCFB0>
    └ <_pytest.config.Config object at 0x0000011D672B7D40>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_hooks.py", line 513, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           │    │         │    │     │    │                  │       └ True
           │    │         │    │     │    │                  └ {'session': <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>}
           │    │         │    │     │    └ <member '_hookimpls' of 'HookCaller' objects>
           │    │         │    │     └ <HookCaller 'pytest_runtestloop'>
           │    │         │    └ <member 'name' of 'HookCaller' objects>
           │    │         └ <HookCaller 'pytest_runtestloop'>
           │    └ <member '_hookexec' of 'HookCaller' objects>
           └ <HookCaller 'pytest_runtestloop'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           │    │               │          │        │       └ True
           │    │               │          │        └ {'session': <Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>}
           │    │               │          └ [<HookImpl plugin_name='main', plugin=<module '_pytest.main' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\venv...
           │    │               └ 'pytest_runtestloop'
           │    └ <function _multicall at 0x0000011D66CECC20>
           └ <_pytest.config.PytestPluginManager object at 0x0000011D66765640>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_callers.py", line 103, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Session  exitstatus=<ExitCode.OK: 0> testsfailed=1 testscollected=5>]
          │         └ <member 'function' of 'HookImpl' objects>
          └ <HookImpl plugin_name='main', plugin=<module '_pytest.main' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\venv\...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\main.py", line 362, in pytest_runtestloop
    item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)
    │    │                                        │              └ <Coroutine test_login_invalid_credentials>
    │    │                                        └ <Coroutine test_user_login_and_token_flow>
    │    └ <member 'config' of 'Node' objects>
    └ <Coroutine test_user_login_and_token_flow>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_hooks.py", line 513, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           │    │         │    │     │    │                  │       └ True
           │    │         │    │     │    │                  └ {'item': <Coroutine test_user_login_and_token_flow>, 'nextitem': <Coroutine test_login_invalid_credentials>}
           │    │         │    │     │    └ <member '_hookimpls' of 'HookCaller' objects>
           │    │         │    │     └ <HookCaller 'pytest_runtest_protocol'>
           │    │         │    └ <member 'name' of 'HookCaller' objects>
           │    │         └ <HookCaller 'pytest_runtest_protocol'>
           │    └ <member '_hookexec' of 'HookCaller' objects>
           └ <HookCaller 'pytest_runtest_protocol'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           │    │               │          │        │       └ True
           │    │               │          │        └ {'item': <Coroutine test_user_login_and_token_flow>, 'nextitem': <Coroutine test_login_invalid_credentials>}
           │    │               │          └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\...
           │    │               └ 'pytest_runtest_protocol'
           │    └ <function _multicall at 0x0000011D66CECC20>
           └ <_pytest.config.PytestPluginManager object at 0x0000011D66765640>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_callers.py", line 103, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Coroutine test_user_login_and_token_flow>, <Coroutine test_login_invalid_credentials>]
          │         └ <member 'function' of 'HookImpl' objects>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\v...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 113, in pytest_runtest_protocol
    runtestprotocol(item, nextitem=nextitem)
    │               │              └ <Coroutine test_login_invalid_credentials>
    │               └ <Coroutine test_user_login_and_token_flow>
    └ <function runtestprotocol at 0x0000011D67275B20>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 137, in runtestprotocol
    reports.append(call_and_report(item, "teardown", log, nextitem=nextitem))
    │       │      │               │                 │             └ <Coroutine test_login_invalid_credentials>
    │       │      │               │                 └ True
    │       │      │               └ <Coroutine test_user_login_and_token_flow>
    │       │      └ <function call_and_report at 0x0000011D67275F80>
    │       └ <method 'append' of 'list' objects>
    └ [<TestReport 'tests/integration/test_auth.py::test_user_login_and_token_flow' when='setup' outcome='passed'>, <TestReport 'te...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 241, in call_and_report
    call = CallInfo.from_call(
           │        └ <classmethod(<function CallInfo.from_call at 0x0000011D672762A0>)>
           └ <class '_pytest.runner.CallInfo'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 341, in from_call
    result: TResult | None = func()
            │                └ <function call_and_report.<locals>.<lambda> at 0x0000011D6C1BA340>
            └ +TResult
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 242, in <lambda>
    lambda: runtest_hook(item=item, **kwds), when=when, reraise=reraise
            │                 │       └ {'nextitem': <Coroutine test_login_invalid_credentials>}
            │                 └ <Coroutine test_user_login_and_token_flow>
            └ <HookCaller 'pytest_runtest_teardown'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_hooks.py", line 513, in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           │    │         │    │     │    │                  │       └ False
           │    │         │    │     │    │                  └ {'item': <Coroutine test_user_login_and_token_flow>, 'nextitem': <Coroutine test_login_invalid_credentials>}
           │    │         │    │     │    └ <member '_hookimpls' of 'HookCaller' objects>
           │    │         │    │     └ <HookCaller 'pytest_runtest_teardown'>
           │    │         │    └ <member 'name' of 'HookCaller' objects>
           │    │         └ <HookCaller 'pytest_runtest_teardown'>
           │    └ <member '_hookexec' of 'HookCaller' objects>
           └ <HookCaller 'pytest_runtest_teardown'>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_manager.py", line 120, in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           │    │               │          │        │       └ False
           │    │               │          │        └ {'item': <Coroutine test_user_login_and_token_flow>, 'nextitem': <Coroutine test_login_invalid_credentials>}
           │    │               │          └ [<HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\...
           │    │               └ 'pytest_runtest_teardown'
           │    └ <function _multicall at 0x0000011D66CECC20>
           └ <_pytest.config.PytestPluginManager object at 0x0000011D66765640>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pluggy\_callers.py", line 103, in _multicall
    res = hook_impl.function(*args)
          │         │         └ [<Coroutine test_user_login_and_token_flow>, <Coroutine test_login_invalid_credentials>]
          │         └ <member 'function' of 'HookImpl' objects>
          └ <HookImpl plugin_name='runner', plugin=<module '_pytest.runner' from 'C:\\Users\\pedro\\VSCode Projects\\ecom-api\\backend\\v...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 189, in pytest_runtest_teardown
    item.session._setupstate.teardown_exact(nextitem)
    │    │                                  └ <Coroutine test_login_invalid_credentials>
    │    └ <member 'session' of 'Node' objects>
    └ <Coroutine test_user_login_and_token_flow>
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\runner.py", line 546, in teardown_exact
    fin()
    └ functools.partial(<bound method FixtureDef.finish of <FixtureDef argname='event_loop' scope='function' baseid=''>>, request=<...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\fixtures.py", line 1021, in finish
    fin()
    └ functools.partial(<function _teardown_yield_fixture at 0x0000011D672BC360>, <function event_loop at 0x0000011D67F2B7E0>, <gen...
  File "C:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\_pytest\fixtures.py", line 907, in _teardown_yield_fixture
    next(it)
         └ <generator object event_loop at 0x0000011D6BFED120>
  File "c:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pytest_asyncio\plugin.py", line 1151, in event_loop
    with _temporary_event_loop_policy(new_loop_policy), _provide_event_loop() as loop:
         │                            │                 │                        └ <ProactorEventLoop running=True closed=False debug=False>
         │                            │                 └ <function _provide_event_loop at 0x0000011D67F2B9C0>
         │                            └ <asyncio.windows_events.WindowsProactorEventLoopPolicy object at 0x0000011D6BFB3A40>
         └ <function _temporary_event_loop_policy at 0x0000011D67F2AE80>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 144, in __exit__
    next(self.gen)
         │    └ <generator object _provide_event_loop at 0x0000011D6C131990>
         └ <contextlib._GeneratorContextManager object at 0x0000011D6C1BC5C0>
  File "c:\Users\pedro\VSCode Projects\ecom-api\backend\venv\Lib\site-packages\pytest_asyncio\plugin.py", line 1170, in _provide_event_loop
    loop.run_until_complete(loop.shutdown_asyncgens())
    │    │                  │    └ <function BaseEventLoop.shutdown_asyncgens at 0x0000011D67EB2C00>
    │    │                  └ <ProactorEventLoop running=True closed=False debug=False>
    │    └ <function BaseEventLoop.run_until_complete at 0x0000011D67EB2F20>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 673, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000011D67F28220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\windows_events.py", line 322, in run_forever
    super().run_forever()
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 640, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000011D67EB4CC0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\base_events.py", line 1993, in _run_once
    handle = None  # Needed to break cycles when an exception occurs.
  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\asyncio\events.py", line 103, in _run
    self = None  # Needed to break cycles when an exception occurs.

> File "C:\Users\pedro\VSCode Projects\ecom-api\backend\tests\conftest.py", line 27, in db_session
    async with test_engine.begin() as connection:
               │           │          └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x0000011D6AAF2AD0>
               │           └ <function AsyncEngine.begin at 0x0000011D6A062F20>
               └ <sqlalchemy.ext.asyncio.engine.AsyncEngine object at 0x0000011D6BFBFF10>

  File "C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2288.0_x64__qbz5n2kfra8p0\Lib\contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
          │    │   │      └ GeneratorExit()
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object AsyncEngine.begin at 0x0000011D6C1CC130>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000011D6C1BC3E0>

RuntimeError: athrow(): asynchronous generator is already running
2025-02-05 14:54:37 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:92 | Attempting login with invalid credentials for nswlede099@example.com
2025-02-05 14:54:37 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for nswlede099@example.com
2025-02-05 14:54:37 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: nswlede099@example.com
2025-02-05 14:54:37 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 14:54:37 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 14:54:37 | INFO     | logging:callHandlers:1762 | [cached since 2.351s ago] ('nswlede099@example.com',)
2025-02-05 14:54:37 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - nswlede099@example.com
2025-02-05 14:54:37 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for nswlede099@example.com: Incorrect email or password
2025-02-05 14:54:37 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 14:54:37 | INFO     | logging:callHandlers:1762 | 127.0.0.1:58341 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 14:54:37 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 14:54:37 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:94 | Invalid login response status: 401
2025-02-05 14:54:37 | INFO     | tests.integration.test_auth:test_invalid_token_validation:105 | Attempting to validate invalid token
2025-02-05 14:54:37 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 14:54:37 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 14:54:37 | INFO     | logging:callHandlers:1762 | 127.0.0.1:58346 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 14:54:37 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 14:54:37 | INFO     | tests.integration.test_auth:test_invalid_token_validation:107 | Invalid token validation status: 401
2025-02-05 15:18:37 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:18:37 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:18:37 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:18:37 | INFO     | logging:callHandlers:1762 | Finished server process [20692]
2025-02-05 15:18:38 | INFO     | logging:callHandlers:1762 | Started server process [904]
2025-02-05 15:18:38 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:18:38 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:21:24 | INFO     | tests.integration.test_auth:test_user_registration:33 | Attempting registration for b48chbtc5z@example.com
2025-02-05 15:21:24 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for b48chbtc5z@example.com
2025-02-05 15:21:24 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: b48chbtc5z@example.com
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00126s] ('b48chbtc5z@example.com',)
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00128s] ('b48chbtc5z@example.com', 'New User', b'$2b$12$TTZlnAMDdoV7TLIXYT.5kOJ2s8408VcClRNEDrC8ESBmLZk2tZBiC', True, False, datetime.datetime(2025, 2, 5, 15, 21, 24, 382818), datetime.datetime(2025, 2, 5, 15, 21, 24, 382818))
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00123s] (20,)
2025-02-05 15:21:24 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: b48chbtc5z@example.com
2025-02-05 15:21:24 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for b48chbtc5z@example.com
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | 127.0.0.1:59009 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 15:21:24 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 15:21:24 | INFO     | tests.integration.test_auth:test_user_registration:35 | Registration response status: 201
2025-02-05 15:21:26 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:92 | Attempting login with invalid credentials for 9xwvm8yep6@example.com
2025-02-05 15:21:26 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for 9xwvm8yep6@example.com
2025-02-05 15:21:26 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: 9xwvm8yep6@example.com
2025-02-05 15:21:26 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:21:26 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 15:21:26 | INFO     | logging:callHandlers:1762 | [cached since 2.537s ago] ('9xwvm8yep6@example.com',)
2025-02-05 15:21:26 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - 9xwvm8yep6@example.com
2025-02-05 15:21:26 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for 9xwvm8yep6@example.com: Incorrect email or password
2025-02-05 15:21:26 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 15:21:26 | INFO     | logging:callHandlers:1762 | 127.0.0.1:59019 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 15:21:26 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 15:21:26 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:94 | Invalid login response status: 401
2025-02-05 15:21:27 | INFO     | tests.integration.test_auth:test_invalid_token_validation:105 | Attempting to validate invalid token
2025-02-05 15:21:27 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 15:21:27 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 15:21:27 | INFO     | logging:callHandlers:1762 | 127.0.0.1:59024 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 15:21:27 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 15:21:27 | INFO     | tests.integration.test_auth:test_invalid_token_validation:107 | Invalid token validation status: 401
2025-02-05 15:22:46 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:22:46 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:22:46 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:22:46 | INFO     | logging:callHandlers:1762 | Finished server process [904]
2025-02-05 15:22:48 | INFO     | logging:callHandlers:1762 | Started server process [2264]
2025-02-05 15:22:48 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:22:48 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:23:07 | INFO     | logging:callHandlers:1762 | Started server process [8352]
2025-02-05 15:23:07 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:23:07 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:23:19 | INFO     | tests.integration.test_auth:test_user_registration:33 | Attempting registration for yy7hzj18hq@example.com
2025-02-05 15:23:19 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for yy7hzj18hq@example.com
2025-02-05 15:23:19 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: yy7hzj18hq@example.com
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | [generated in 0.00046s] ('yy7hzj18hq@example.com',)
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | [generated in 0.00079s] ('yy7hzj18hq@example.com', 'New User', b'$2b$12$4qqK0gFHYsmMBXSecK3Knu0FvfrI.Z0Vc7HpeyYepFvfrm2odDQLy', True, False, datetime.datetime(2025, 2, 5, 15, 23, 19, 777685), datetime.datetime(2025, 2, 5, 15, 23, 19, 777685))
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | [generated in 0.00090s] (21,)
2025-02-05 15:23:19 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: yy7hzj18hq@example.com
2025-02-05 15:23:19 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for yy7hzj18hq@example.com
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | 127.0.0.1:59063 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 15:23:19 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 15:23:19 | INFO     | tests.integration.test_auth:test_user_registration:35 | Registration response status: 201
2025-02-05 15:23:21 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:93 | Attempting login with invalid credentials for 8loji7hb45@example.com
2025-02-05 15:23:21 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for 8loji7hb45@example.com
2025-02-05 15:23:21 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: 8loji7hb45@example.com
2025-02-05 15:23:21 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:23:21 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 15:23:21 | INFO     | logging:callHandlers:1762 | [cached since 2.055s ago] ('8loji7hb45@example.com',)
2025-02-05 15:23:21 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - 8loji7hb45@example.com
2025-02-05 15:23:21 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for 8loji7hb45@example.com: Incorrect email or password
2025-02-05 15:23:21 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 15:23:21 | INFO     | logging:callHandlers:1762 | 127.0.0.1:59074 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 15:23:21 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 15:23:21 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:95 | Invalid login response status: 401
2025-02-05 15:23:22 | INFO     | tests.integration.test_auth:test_invalid_token_validation:106 | Attempting to validate invalid token
2025-02-05 15:23:22 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 15:23:22 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 15:23:22 | INFO     | logging:callHandlers:1762 | 127.0.0.1:59080 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 15:23:22 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 15:23:22 | INFO     | tests.integration.test_auth:test_invalid_token_validation:108 | Invalid token validation status: 401
2025-02-05 15:24:45 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:24:45 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:24:45 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:24:45 | INFO     | logging:callHandlers:1762 | Finished server process [8352]
2025-02-05 15:24:47 | INFO     | logging:callHandlers:1762 | Started server process [17312]
2025-02-05 15:24:47 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:24:47 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:41:12 | INFO     | logging:callHandlers:1762 | Started server process [19772]
2025-02-05 15:41:12 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:41:12 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:41:22 | INFO     | tests.integration.test_auth:test_user_registration:34 | Attempting registration for mrrohk156v@example.com
2025-02-05 15:41:22 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for mrrohk156v@example.com
2025-02-05 15:41:22 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: mrrohk156v@example.com
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | [generated in 0.00139s] ('mrrohk156v@example.com',)
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | [generated in 0.00105s] ('mrrohk156v@example.com', 'New User', b'$2b$12$oiHSQlJdglsVdRLoBOvMK.l1qDPPU2zQK.PkorLkUdYAQlXVZqIiS', True, False, datetime.datetime(2025, 2, 5, 15, 41, 22, 929819), datetime.datetime(2025, 2, 5, 15, 41, 22, 929819))
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | [generated in 0.00113s] (22,)
2025-02-05 15:41:22 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: mrrohk156v@example.com
2025-02-05 15:41:22 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for mrrohk156v@example.com
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | 127.0.0.1:60055 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 15:41:22 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 15:41:22 | INFO     | tests.integration.test_auth:test_user_registration:36 | Registration response status: 201
2025-02-05 15:41:25 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:93 | Attempting login with invalid credentials for 75ih6h4e7u@example.com
2025-02-05 15:41:25 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for 75ih6h4e7u@example.com
2025-02-05 15:41:25 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: 75ih6h4e7u@example.com
2025-02-05 15:41:25 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:41:25 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 15:41:25 | INFO     | logging:callHandlers:1762 | [cached since 2.516s ago] ('75ih6h4e7u@example.com',)
2025-02-05 15:41:25 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - 75ih6h4e7u@example.com
2025-02-05 15:41:25 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for 75ih6h4e7u@example.com: Incorrect email or password
2025-02-05 15:41:25 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 15:41:25 | INFO     | logging:callHandlers:1762 | 127.0.0.1:60065 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 15:41:25 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 15:41:25 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:95 | Invalid login response status: 401
2025-02-05 15:41:26 | INFO     | tests.integration.test_auth:test_invalid_token_validation:106 | Attempting to validate invalid token
2025-02-05 15:41:26 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 15:41:26 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 15:41:26 | INFO     | logging:callHandlers:1762 | 127.0.0.1:60072 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 15:41:26 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 15:41:26 | INFO     | tests.integration.test_auth:test_invalid_token_validation:108 | Invalid token validation status: 401
2025-02-05 15:47:11 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:47:11 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:47:11 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:47:11 | INFO     | logging:callHandlers:1762 | Finished server process [19772]
2025-02-05 15:47:13 | INFO     | logging:callHandlers:1762 | Started server process [23304]
2025-02-05 15:47:13 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:47:13 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:49:02 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:49:02 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:49:02 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:49:02 | INFO     | logging:callHandlers:1762 | Finished server process [23304]
2025-02-05 15:49:04 | INFO     | logging:callHandlers:1762 | Started server process [25564]
2025-02-05 15:49:04 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:49:04 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:51:20 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:51:20 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:51:20 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:51:20 | INFO     | logging:callHandlers:1762 | Finished server process [25564]
2025-02-05 15:51:22 | INFO     | logging:callHandlers:1762 | Started server process [21688]
2025-02-05 15:51:22 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:51:22 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:52:29 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:52:30 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:52:30 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:52:30 | INFO     | logging:callHandlers:1762 | Finished server process [21688]
2025-02-05 15:52:31 | INFO     | logging:callHandlers:1762 | Started server process [22104]
2025-02-05 15:52:31 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:52:31 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:54:24 | INFO     | tests.integration.test_auth:test_user_registration:40 | Attempting registration for vtx2lxmq9d@example.com
2025-02-05 15:54:24 | INFO     | app.api.v1.endpoints.auth:register:22 | Attempting user registration for vtx2lxmq9d@example.com
2025-02-05 15:54:24 | INFO     | app.services.auth_service:register_user:27 | Checking for existing user with email: vtx2lxmq9d@example.com
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | select pg_catalog.version()
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | select current_schema()
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | show standard_conforming_strings
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | [raw sql] ()
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00124s] ('vtx2lxmq9d@example.com',)
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | INSERT INTO users (email, full_name, hashed_password, is_active, is_superuser, created_at, updated_at) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BYTEA, $4::BOOLEAN, $5::BOOLEAN, $6::TIMESTAMP WITHOUT TIME ZONE, $7::TIMESTAMP WITHOUT TIME ZONE) RETURNING users.id
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00128s] ('vtx2lxmq9d@example.com', 'New User', b'$2b$12$nPNH5.FsVG9kiVJTj3aOc.3.b9rYpBsBkfpglAAtocWDP5wb2sglO', True, False, datetime.datetime(2025, 2, 5, 15, 54, 24, 445105), datetime.datetime(2025, 2, 5, 15, 54, 24, 445105))
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | COMMIT
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.id = $1::INTEGER
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | [generated in 0.00118s] (23,)
2025-02-05 15:54:24 | INFO     | app.services.auth_service:register_user:56 | User registered successfully: vtx2lxmq9d@example.com
2025-02-05 15:54:24 | INFO     | app.api.v1.endpoints.auth:register:24 | User registration successful for vtx2lxmq9d@example.com
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | 127.0.0.1:60283 - "POST /api/v1/auth/register HTTP/1.1" 201
2025-02-05 15:54:24 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/register "HTTP/1.1 201 Created"
2025-02-05 15:54:24 | INFO     | tests.integration.test_auth:test_user_registration:42 | Registration response status: 201
2025-02-05 15:54:27 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:96 | Attempting login with invalid credentials for tusrt5r9o7@example.com
2025-02-05 15:54:27 | INFO     | app.api.v1.endpoints.auth:login:37 | Login attempt for tusrt5r9o7@example.com
2025-02-05 15:54:27 | INFO     | app.services.auth_service:authenticate_user:79 | Authentication attempt for email: tusrt5r9o7@example.com
2025-02-05 15:54:27 | INFO     | logging:callHandlers:1762 | BEGIN (implicit)
2025-02-05 15:54:27 | INFO     | logging:callHandlers:1762 | SELECT users.email, users.full_name, users.hashed_password, users.is_active, users.is_superuser, users.id, users.created_at, users.updated_at 
FROM users 
WHERE users.email = $1::VARCHAR
2025-02-05 15:54:27 | INFO     | logging:callHandlers:1762 | [cached since 2.817s ago] ('tusrt5r9o7@example.com',)
2025-02-05 15:54:27 | WARNING  | app.services.auth_service:authenticate_user:84 | Authentication failed: User not found - tusrt5r9o7@example.com
2025-02-05 15:54:27 | WARNING  | app.api.v1.endpoints.auth:login:44 | Login failed for tusrt5r9o7@example.com: Incorrect email or password
2025-02-05 15:54:27 | INFO     | logging:callHandlers:1762 | ROLLBACK
2025-02-05 15:54:27 | INFO     | logging:callHandlers:1762 | 127.0.0.1:60293 - "POST /api/v1/auth/token HTTP/1.1" 401
2025-02-05 15:54:27 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/token "HTTP/1.1 401 Unauthorized"
2025-02-05 15:54:27 | INFO     | tests.integration.test_auth:test_login_invalid_credentials:98 | Invalid login response status: 401
2025-02-05 15:54:27 | INFO     | tests.integration.test_auth:test_invalid_token_validation:109 | Attempting to validate invalid token
2025-02-05 15:54:27 | INFO     | app.api.v1.endpoints.auth:validate_token:78 | Attempting token validation
2025-02-05 15:54:27 | WARNING  | app.api.v1.endpoints.auth:validate_token:85 | Token validation failed: Invalid token
2025-02-05 15:54:27 | INFO     | logging:callHandlers:1762 | 127.0.0.1:60298 - "POST /api/v1/auth/validate-token HTTP/1.1" 401
2025-02-05 15:54:27 | INFO     | logging:callHandlers:1762 | HTTP Request: POST http://127.0.0.1:8000/api/v1/auth/validate-token "HTTP/1.1 401 Unauthorized"
2025-02-05 15:54:27 | INFO     | tests.integration.test_auth:test_invalid_token_validation:111 | Invalid token validation status: 401
2025-02-05 15:56:11 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:56:12 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:56:12 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:56:12 | INFO     | logging:callHandlers:1762 | Finished server process [22104]
2025-02-05 15:56:13 | INFO     | logging:callHandlers:1762 | Started server process [2096]
2025-02-05 15:56:13 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:56:13 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:58:05 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:58:05 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:58:05 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:58:05 | INFO     | logging:callHandlers:1762 | Finished server process [2096]
2025-02-05 15:58:07 | INFO     | logging:callHandlers:1762 | Started server process [24232]
2025-02-05 15:58:07 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:58:07 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:58:17 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:58:17 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:58:17 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:58:17 | INFO     | logging:callHandlers:1762 | Finished server process [24232]
2025-02-05 15:58:19 | INFO     | logging:callHandlers:1762 | Started server process [25304]
2025-02-05 15:58:19 | INFO     | logging:callHandlers:1762 | Waiting for application startup.
2025-02-05 15:58:19 | INFO     | logging:callHandlers:1762 | Application startup complete.
2025-02-05 15:59:38 | INFO     | logging:callHandlers:1762 | Shutting down
2025-02-05 15:59:38 | INFO     | logging:callHandlers:1762 | Waiting for application shutdown.
2025-02-05 15:59:38 | INFO     | logging:callHandlers:1762 | Application shutdown complete.
2025-02-05 15:59:38 | INFO     | logging:callHandlers:1762 | Finished server process [25304]
